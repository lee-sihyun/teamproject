<%@ page language="java" contentType="text/html; charset=UTF-8"
	pageEncoding="UTF-8"%>
<jsp:include page="/admin/header.jsp" />
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

<style type="text/css">
#content {
	width: 1280px;
	min-height: 750px;
	padding: 0px 40px 130px 40px;
	box-sizing: border-box;
	vertical-align: top;
}

.headline {
	width: 1278px;
	height: 48px;
	margin: 0 0 -1px 0;
	box-sizing: border-box;
	background-color: #8b93a9;
	border: 1px solid #787d8f;
}

h2 {
	width: 68.625px;
	height: 21px;
	float: left;
	padding: 0 0 0 20px;
	font-size: 16px;
	color: #535354;
	font-weight: normal;
}

.tableArea {
	width: 1240px;
	/*height: 828px;*/
	display: block;
	padding: 30px 20px 30px 20px;
	border-radius: 2px;
	background: #fff;
	box-shadow: 0px 2px 1px 0px rgba(205, 211, 222, 1);
}

table {
	width: 1239px;
	/*	height: 827px;*/
	border-top: 1px solid #dedede;
	line-height: 1.5;
	background-color: #fff;
	table-layout: fixed;
	border: 0;
	border-spacing: 0;
	border-collapse: collapse;
}

tr {
	display: table-row;
	vertical-align: inherit;
	border-color: inherit;
	width: 1239px;
	/*height: 53px;*/
}

.type {
	width: 159px;
	/*height: 31px;*/
	padding: 11px 15px 10px 15px;
	border: 1px solid #dedede;
	text-align: left;
	word-break: keep-all;
	vertical-align: top;
	color: #2e3039;
	background-color: #f3f3f3;
	font-size: 16px;
	text-align: justify;
}

td {
	/*width: 1018px;*/
	height: 32px;
	border: 1px solid #dedede;
	padding: 10px 15px 10px 15px;
	line-height: 24px;
	vertical-align: top;
	display: table-cell;
}

.mButtongCenter {
	width: 1234px;
	height: 36px;
	padding: 0px 4px 0px 0px;
	margin: 20px 0px 20px 0px;
	position: relative;
	text-align: center;
}

.btn {
	width: 100px;
	height: 40px;
	padding: 0px 20px 0px 20px;
	color: #fff;
	font-size: 20px;
	line-height: 20px;
	background-color: #55a0ff;
	font-weight: bold;
	transition: .2s ease-out;
}

.error {
	color: red;
	position: relative;
	left: 160px;
	display: none;
}
</style>



<!--본문내용역역 시작 content로 잡으면 됩니다  -->

<div id="content">
	<div class="headingArea"></div>




	<form
		action="<%=request.getContextPath()%>/admin/product/product_action.jsp"
		method="post" id="admit" name="admitForm"
		enctype="multipart/form-data">
		<div class="headline">
			<h2>상품등록</h2>

		</div>
		<div class="tableArea">
			<div>
				<table>



					<tr>

						<td class="type">카테고리-대분류</td>
						<td colspan="2"><select name="mainCategory" id="mainCategory"  style="width:200px;height: 27px;">
								<option value="">선택하세요 </option>
						</select> </td>

					</tr>


					<tr>

						<td class="type">카테고리-소분류</td>
						<td colspan="2"><select name="subCategory" id="subCategory"  style="width:200px;height: 27px;" >
								
								<option value="">선택하세요 </option>
						</select></td>





					</tr>





					<tr>

						<td class="type">상품코드</td>
						<td colspan="2"><input type="text" name="itemNo" id="itemNo">
							<div id="itemNoMsg" class="error">코드를 입력해주세요</div></td>
					</tr>





					<tr>
						<td class="type">상품재고수량</td>
						<td colspan="2"><input type="text" name="stock" class="stock"
							id="stock"> <span>개</span>
							<div id="stockMsg" class="error">상품재고수량을 입력해주세요</div></td>


					</tr>
					<tr>

						<td class="type">상품가격</td>
						<td colspan="2"><input type="text" name="price" id="price">
							<span>원</span>

							<div id="priceMsg" class="error">상품가격을 입력해주세요</div></td>
					</tr>

					<tr>
						<td class="type">상품명</td>
						<td colspan="2"><input type="text" name="name" id="name">
							<div id="nameMsg" class="error">상품명을 입력해주세요</div></td>
					</tr>
					<tr>

						<td class="type">상품이미지</td>
						<td colspan="2"><input type="file" name="image" id="image">
							<div id="imageMsg" class="error">상품이미지를 등록해주세요</div></td>

					</tr>


					<tr>

						<td scope="row" class="type">상품설명</td>
						<td colspan="2"><input type="file" name="imagedetail"
							id="imagedetail">
							<div id="imagedetailMsg" class="error">상품이미지를 등록해주세요</div></td>

					</tr>

				</table>
			</div>

		</div>




		<!-- 표 헤더 -->
		<div class="mButtongCenter">
			<button type="submit" class="btn">등록</button>
		</div>
	</form>
</div>

<!-- container 영역종료 -->

<!-- wrap영역종료 -->
<script type="text/javascript">
	$("#itemNo").focus();

	$("#admit").submit(function() {
		var submitResult = true;

		$(".error").css("display", "none");

		if ($("#itemNo").val() == "") {
			$("#itemNoMsg").css("display", "block");
			submitResult = false;
		}
		if ($("#name").val() == "") {
			$("#nameMsg").css("display", "block");
			submitResult = false;
		}

		if ($("#price").val() == "") {
			$("#priceMsg").css("display", "block");
			submitResult = false;
		}

		if ($("#stock").val() == "") {
			$("#stockMsg").css("display", "block");
			submitResult = false;
		}

		if ($("#image").val() == "") {
			$("#imageMsg").css("display", "block");
			submitResult = false;
		}
		if ($("#imagedetail").val() == "") {
			$("#imagedetailMsg").css("display", "block");
			submitResult = false;
		}

		return submitResult;

	});
/*/
	$(document)
			.ready(
					function() {

						//Main 카테고리를 선택 할때 마다 AJAX를 호출할 수 있지만 DB접속을 매번 해야 하기 때문에 main, sub카테고리 전체을 들고온다.

						//****************이부분은 DB로 셋팅하세요.
						//Main 카테고리 셋팅 (DB에서 값을 가져와 셋팅 하세요.)
						var categoryArray = new Array();
						var categoryObject = new Object();

						categoryObject = new Object();
						categoryObject.main_category_id = "1";
						categoryObjectt.main_category_name = "배쓰";
						categoryArray.push(categoryObject);

						categoryObject = new Object();
						categoryObject.main_category_id = "2";
						categoryObjectt.main_category_name = "샤워";
						categoryArray.push(categoryObject);

						categoryObject = new Object();
						categoryObject.main_category_id = "3";
						categoryObjectt.main_category_name = "보디";
						categoryArray.push(categoryObject);

						//Sub 카테고리 셋팅 (DB에서 값을 가져와 셋팅 하세요.)
						var category2Array = new Array();
						var category2Object = new Object();

						//배쓰에 해당하는 sub category 리스트
						category2Object = new Object();
						category2Object.main_category_id = "1";
						category2Object.sub_category_id = "1"
						category2Object.sub_category_name = "배쓰밤"
						category2Array.push(category2Object);

						category2Object = new Object();
						category2Object.main_category_id = "1";
						category2Object.sub_category_id = "2"
						category2Object.sub_category_name = "버블바"
						category2Array.push(category2Object);

						category2Object = new Object();
						category2yObject.main_category_id = "1";
						category2Object.sub_category_id = "3"
						category2Object.sub_category_name = "배쓰오일"
						category2Array.push(category2Object);

						//샤워에 해당하는 sub category 리스트
						category2Object = new Object();
						category2Object.main_category_id = "2";
						category2Object.sub_category_id = "1"
						category2Object.sub_category_name = "솝"
						category2Array.push(category2Object);

						category2Object = new Object();
						category2Object.main_category_id = "2";
						category2Object.sub_category_id = "2"
						category2Object.sub_category_name = "샤워젤&젤리"
						category2Array.push(subCategoryObject);

						category2Object = new Object();
						category2Object.main_category_id = "2";
						category2Object.sub_category_id = "3"
						category2Object.sub_category_name = "보디컨디셔너"
						category2Array.push(subCategoryObject);

						category2Object = new Object();
						category2Object.main_category_id = "2";
						category2Object.sub_category_id = "4"
						category2Object.sub_category_name = "샤워밤"
						category2Array.push(category2yObject);

						//

						//메인 카테고리 셋팅
						var category1SelectBox = $("select[name='category']");

						for (var i = 0; i < categoryArray.length; i++) {
							category1SelectBox
									.append("<option value='"categoryArray[i].main_category_id+"'>"
											+ categoryArray[i].main_category_name
											+ "</option>");
						}

						//*********** 1depth카테고리 선택 후 2depth 생성 START ***********
						$(document)
								.on(
										"change",
										"select[name='category']",
										function() {

											//두번째 셀렉트 박스를 삭제 시킨다.
											var category2SelectBox = $("select[name='category2']");
											category2SelectBox.children()
													.remove(); //기존 리스트 삭제

											//선택한 첫번째 박스의 값을 가져와 일치하는 값을 두번째 셀렉트 박스에 넣는다.
											$("option:selected", this)
													.each(
															function() {
																var selectValue = $(
																		this)
																		.val(); //main category 에서 선택한 값
																		category2SelectBox
																		.append("<option value=''>전체</option>");
																for (var i = 0; i < category2Array.length; i++) {
																	if (selectValue == category2Array[i].main_category_id) {

																		category2SelectBox
																				.append("<option value='"+category2Array[i].sub_category_id+"'>"
																						+ category2Array[i].sub_category_name
																						+ "</option>");

																	}
																}
															});

										});
						//*********** 1depth카테고리 선택 후 2depth 생성 END ***********

					});
					
					
					*/
					$(document).ready(function() {
					     
					    //Main 카테고리를 선택 할때 마다 AJAX를 호출할 수 있지만 DB접속을 매번 해야 하기 때문에 main, sub카테고리 전체을 들고온다.
					     
					    //****************이부분은 DB로 셋팅하세요.
					    //Main 카테고리 셋팅 (DB에서 값을 가져와 셋팅 하세요.)
					    var mainCategoryArray = new Array();
					    var mainCategoryObject = new Object();
					     
					    mainCategoryObject = new Object();
					    mainCategoryObject.main_category_id = "1";
					    mainCategoryObject.main_category_name = "배쓰";
					    mainCategoryArray.push(mainCategoryObject);
					     
					    mainCategoryObject = new Object();
					    mainCategoryObject.main_category_id = "2";
					    mainCategoryObject.main_category_name = "샤워";
					    mainCategoryArray.push(mainCategoryObject);
					    
					    mainCategoryObject = new Object();
					    mainCategoryObject.main_category_id = "3";
					    mainCategoryObject.main_category_name = "보디";
					    mainCategoryArray.push(mainCategoryObject);
					     
					    //Sub 카테고리 셋팅 (DB에서 값을 가져와 셋팅 하세요.)
					    var subCategoryArray = new Array();
					    var subCategoryObject = new Object();
					     
					    //배쓰에 해당하는 sub category 리스트
					    subCategoryObject = new Object();
					    subCategoryObject.main_category_id = "1";
					    subCategoryObject.sub_category_id = "1"
					    subCategoryObject.sub_category_name = "배쓰밤" 
					    subCategoryArray.push(subCategoryObject);
					     
					    subCategoryObject = new Object();
					    subCategoryObject.main_category_id = "1";
					    subCategoryObject.sub_category_id = "2"
					    subCategoryObject.sub_category_name = "버블바" 
					    subCategoryArray.push(subCategoryObject);
					     
					    subCategoryObject = new Object();
					    subCategoryObject.main_category_id = "1";
					    subCategoryObject.sub_category_id = "3"
					    subCategoryObject.sub_category_name = "배쓰오일" 
					    subCategoryArray.push(subCategoryObject);
					     
					    //샤워에 해당하는 sub category 리스트
					    subCategoryObject = new Object();
					    subCategoryObject.main_category_id = "2";
					    subCategoryObject.sub_category_id = "1"
					    subCategoryObject.sub_category_name = "솝" 
					    subCategoryArray.push(subCategoryObject);
					     
					    subCategoryObject = new Object();
					    subCategoryObject.main_category_id = "2";
					    subCategoryObject.sub_category_id = "2"
					    subCategoryObject.sub_category_name = "샤워젤&젤리"
					    subCategoryArray.push(subCategoryObject);
					     
					    subCategoryObject = new Object();
					    subCategoryObject.main_category_id = "2";
					    subCategoryObject.sub_category_id = "3"
					    subCategoryObject.sub_category_name = "보디컨디셔너"
					    subCategoryArray.push(subCategoryObject);
					     
					    subCategoryObject = new Object();
					    subCategoryObject.main_category_id = "2";
					    subCategoryObject.sub_category_id = "4"
					    subCategoryObject.sub_category_name = "샤워밤"
					    subCategoryArray.push(subCategoryObject);
					    
					  //보디에 해당하는 sub category 리스트
					    subCategoryObject = new Object();
					    subCategoryObject.main_category_id = "3";
					    subCategoryObject.sub_category_id = "1"
					    subCategoryObject.sub_category_name = "클렌저" 
					    subCategoryArray.push(subCategoryObject);
					     
					    subCategoryObject = new Object();
					    subCategoryObject.main_category_id = "3";
					    subCategoryObject.sub_category_id = "2"
					    subCategoryObject.sub_category_name = "핸드앤풋"
					    subCategoryArray.push(subCategoryObject);
					     
					    subCategoryObject = new Object();
					    subCategoryObject.main_category_id = "3";
					    subCategoryObject.sub_category_id = "3"
					    subCategoryObject.sub_category_name = "로션"
					    subCategoryArray.push(subCategoryObject);
					     
		
					    
					    //****************이부분은 DB로 셋팅하세요.
					     
					     
					    //메인 카테고리 셋팅
					    var mainCategorySelectBox = $("select[name='mainCategory']");
					     
					    for(var i=0;i<mainCategoryArray.length;i++){
					        mainCategorySelectBox.append("<option value='"+mainCategoryArray[i].main_category_id+"'>"+mainCategoryArray[i].main_category_name+"</option>");
					    }
					     
					    //*********** 1depth카테고리 선택 후 2depth 생성 START ***********
					    $(document).on("change","select[name='mainCategory']",function(){
					         
					        //두번째 셀렉트 박스를 삭제 시킨다.
					        var subCategorySelectBox = $("select[name='subCategory']");
					        subCategorySelectBox.children().remove(); //기존 리스트 삭제
					         
					        //선택한 첫번째 박스의 값을 가져와 일치하는 값을 두번째 셀렉트 박스에 넣는다.
					        $("option:selected", this).each(function(){
					            var selectValue = $(this).val(); //main category 에서 선택한 값
					            subCategorySelectBox.append("<option value=''>전체</option>");
					            for(var i=0;i<subCategoryArray.length;i++){
					                if(selectValue == subCategoryArray[i].main_category_id){
					                     
					                    subCategorySelectBox.append("<option value='"+subCategoryArray[i].sub_category_id+"'>"+subCategoryArray[i].sub_category_name+"</option>");
					                     
					                }
					            }
					        });
					         
					    });
					    //*********** 1depth카테고리 선택 후 2depth 생성 END ***********
					         
					});
					
					
</script>

</body>
</html>